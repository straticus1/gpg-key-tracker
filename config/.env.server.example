# GPG Key Server Configuration Example
# Copy this file to .env and customize for your environment

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Enable the server
GPG_SERVER_ENABLED=true

# Server host and port
GPG_SERVER_HOST=0.0.0.0
GPG_SERVER_PORT=8443

# Admin API key (CHANGE THIS!)
GPG_SERVER_ADMIN_API_KEY=change-me-secure-admin-key-here

# SSL Configuration (recommended for production)
# GPG_SERVER_SSL_CERT=/path/to/your/cert.pem
# GPG_SERVER_SSL_KEY=/path/to/your/private.key
GPG_SERVER_REQUIRE_SSL=false

# CORS origins (comma-separated)
# GPG_SERVER_CORS_ORIGINS=https://your-frontend.com,https://admin.your-site.com

# Request size and timeout limits
GPG_SERVER_MAX_REQUEST_SIZE=1048576
GPG_SERVER_REQUEST_TIMEOUT=30

# Number of worker processes (keep at 1 for SQLite)
GPG_SERVER_WORKERS=1

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database file path
DATABASE_PATH=./gpg_server.db

# Enable SQL query logging (debug only)
SQL_ECHO=false

# Database connection pool settings
DB_POOL_TIMEOUT=30
DB_CACHE_SIZE=10000

# =============================================================================
# GPG CONFIGURATION
# =============================================================================

# GPG home directory
GPG_HOME=~/.gnupg

# Maximum key file size (in MB)
MAX_KEY_SIZE_MB=1

# Enable key validation
VALIDATE_KEYS=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Input sanitization
SANITIZE_INPUT=true
MAX_INPUT_LENGTH=255
MAX_NOTES_LENGTH=1000

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600

# =============================================================================
# API KEY CONFIGURATION
# =============================================================================

# Default rate limits for new API keys
API_KEY_DEFAULT_RATE_LIMIT=100
API_KEY_MAX_RATE_LIMIT=10000

# Default expiration (leave empty for no expiration)
# API_KEY_DEFAULT_EXPIRES_DAYS=365

# Cleanup interval for expired keys
API_KEY_CLEANUP_INTERVAL_HOURS=24

# API key length (bytes for token_hex)
API_KEY_LENGTH=32

# =============================================================================
# MASTER KEY CONFIGURATION
# =============================================================================

# Default key settings
MASTER_KEY_SIZE=4096
MASTER_KEY_ALGORITHM=RSA

# Require master signature validation for all keys
REQUIRE_MASTER_SIGNATURE=true

# Signature cache duration
SIGNATURE_CACHE_HOURS=24

# Master key backup
MASTER_KEY_BACKUP_ENABLED=true
MASTER_KEY_BACKUP_PATH=./master_key_backups

# =============================================================================
# ORGANIZATION CONFIGURATION
# =============================================================================

# Your organization information (for organizational keys)
ORGANIZATION_NAME=Your Organization Name
ADMIN_EMAIL=admin@your-organization.com

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level
LOG_LEVEL=INFO

# Log format (text or json)
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_JSON=false

# Log file (leave empty to log only to console)
# LOG_FILE=./logs/server.log

# Log rotation
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Enable Prometheus metrics
MONITORING_ENABLED=true
PROMETHEUS_PORT=8000

# Health check port
HEALTH_CHECK_PORT=8001

# Metrics endpoint path
METRICS_PATH=/metrics

# =============================================================================
# EMAIL CONFIGURATION (Optional)
# =============================================================================

# SMTP server settings (for notifications)
# SMTP_SERVER=smtp.your-org.com
# SMTP_PORT=587
# SMTP_USERNAME=noreply@your-org.com
# SMTP_PASSWORD=your-smtp-password
# SMTP_USE_TLS=true
# EMAIL_FROM_ADDRESS=gpg-server@your-org.com
# EMAIL_TIMEOUT=30

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Enable automated backups
BACKUP_ENABLED=false

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# Backup retention
BACKUP_RETENTION_DAYS=30

# Backup path
BACKUP_PATH=./backups

# Compress backups
BACKUP_COMPRESS=true

# =============================================================================
# AWS CONFIGURATION (Optional)
# =============================================================================

# AWS credentials (for S3 backups)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_DEFAULT_REGION=us-east-1
# S3_BUCKET=your-gpg-backups-bucket
# S3_PREFIX=gpg-server-backups/